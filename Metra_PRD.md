# Metra PRD v4.0（Product Requirements Document）

## 一、产品简介

**产品名称**：Metra
**版本**：v1.0 MVP（基于开源模型的增值训练）
**目标发布周期**：3-4个月
**产品定位**：Metra 是一款基于开源大模型的 AI 增值训练平台，用户通过自然语言描述目标，即可完成从模型推荐、数据构建、训练到部署的完整流程。核心面向非技术用户。

---

## 二、产品愿景与目标

**愿景**：

> 让任何人都能拥有一个基于开源大模型、通过自己数据微调出来的专属 AI 助手。

**目标用户**：

* 创作者、教育者、小企业主
* 有特定任务需求但缺乏 AI 技术能力的用户

**用户核心需求**：

* 能用自然语言表达问题
* 无需理解模型技术细节也能定制自己的 AI
* 用自己的数据，快速做出有效结果

---

## 三、核心功能模块（V4结构）

### 1. 用户需求理解模块（Prompt-to-Schema）

* 通过多轮自然语言问答对话澄清任务
* 输出结构化任务定义（任务类型 / 输入输出字段 / 目标示例）
* 由 GPT-4 解析并可复编辑

### 2. 开源模型推荐模块

* 基于用户需求自动推荐合适的基础开源模型
* 展示模型类型、架构、适配场景、训练成本等信息
* 用户可选择默认推荐或手动切换

### 3. 数据构建模块

* 支持三种数据源：

  * 爬虫采集（ScrapingBee）
  * AI 合成（GPT-3.5）
  * 用户上传（CSV、JSON、图片、文本等）
* 用户与 AI 可进一步对话明确数据结构与样本分布

### 4. 数据整合引擎（DFE）

* 字段对齐（自动同义词匹配）
* 缺失值补全与结构校验
* 转换为可用于训练的数据格式（如 jsonl / image-folder）
* 用户可视化查看 + 编辑（Handsontable）

### 5. 增值训练模块（Fine-tune Center）

* 使用推荐基础模型 + 处理后数据发起训练
* 支持 LoRA、微调、全参训练多种方式（调用 Replicate API）
* 显示训练进度、示例输出、性能分析
* 专业术语全部翻译成用户语言（如“loss”→“模型还在学习”）

### 6. 模型交付与部署

* 交付方式：

  * 生成 API + 文档 + Token 权限控制
  * 导出模型文件（GGUF / ONNX / .pt）
  * 封装插件（Notion / Browser / 自定义工具）

### 7. 模型市场（Marketplace MVP）

* 用户可上架自己训练的模型
* 支持设置调用价格 / 买断价格
* 支持收藏、评论、复刻、API 分润

---

## 四、交互与设计要求（保持不变）

* 配色系统：主色灰色系（gray-900 #111827）、辅助蓝色系（blue-500/600）、背景纯白+浅灰卡片
* 无边框菜单 + 分组呼吸感
* 字体统一（Inter），Regular + Medium + Bold
* 图标线稿、控制在 16\~20px
* 卡片使用 8px 圆角 + subtle shadow
* 所有点击区域上下留 12px padding

---

## 五、MVP阶段模块开发优先级

| 步骤 | 模块                      | 时间估计    |
| -- | ----------------------- | ------- |
| P0 | 用户认证                    | 2-3 天   |
| P1 | Prompt-to-Schema 多轮问答模块 | 5-7 天   |
| P2 | 模型推荐系统                  | 5-7 天   |
| P3 | 数据构建模块（三源）              | 10-14 天 |
| P4 | 数据整合引擎（DFE）             | 14-21 天 |
| P5 | 增值训练模块（调用 Replicate）    | 7-10 天  |
| P6 | 模型导出/API发布模块            | 7-10 天  |
| P7 | 模型管理页 / 社区 MVP          | 7-10 天  |
| P8 | Stripe 收费系统集成           | 5-7 天   |
| P9 | UIUX 打磨与动画优化            | 10-14 天 |

总时长估算：**72-103 天**

---

## 六、技术选型（与 V3 一致）

* 前端：React + TypeScript + Tailwind CSS
* 后端：FastAPI + PostgreSQL + Redis + Supabase
* AI 能力：OpenAI GPT-4 / GPT-3.5 + Embeddings
* 数据处理 UI：Handsontable
* 模型训练：Replicate API / AWS EC2 + Docker
* 向量匹配：Supabase Vector Store
* 监控系统：Sentry

---

## 七、版本计划

* v1.0：完整闭环（从任务理解 → 模型推荐 → 增值训练 → 交付）
* v1.5：多模态模型支持（图像、语音）、模型复刻 / 再训练机制
* v2.0：私有部署、行业模板库、模型性能评分系统

---

## 八、下一步

* 启动 MVP 第一阶段：Prompt-to-Schema + 模型推荐
* 同时搭建 DFE 的基本架构（字段映射、缺失值处理）
* 准备测试用的模型推荐规则库 + 示例数据
